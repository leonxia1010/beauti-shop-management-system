# Requirements Traceability Matrix – Story 1.1: Monorepo Baseline Setup

Date: 2025-09-26  
Analyst: Quinn (QA)

## Coverage Summary

- Total requirements (ACs): 5
- Fully Covered: 5 (100%)
- Partially Covered: 0
- Not Covered: 0
- Reference artifacts:
  - Test design: `docs/qa/assessments/1.1-test-design-20250926.md`
  - Risk profile: `docs/qa/assessments/1.1-risk-20250926.md`

## Requirement Mappings

### AC1 – "Monorepo is created with Nx and npm, containing apps `admin-web`, `mobile-app`, `api-gateway`, and `batch-jobs`, each scaffolded with the correct framework/tooling."

**Coverage:** FULL

1. **Test ID:** 1.1-INT-001

   - Level: Integration (nx build admin-web)
   - Priority: P1
   - Given: Nx workspace is initialized with admin-web app scaffolding
   - When: `nx build admin-web` executes
   - Then: Build completes using Vite + React + Tailwind config without errors
   - Notes: Verifies React/Tailwind integration and tsconfig paths

2. **Test ID:** 1.1-INT-002

   - Level: Integration (nx build/test api-gateway)
   - Given: Nx workspace with NestJS API target
   - When: `nx build api-gateway` and `nx test api-gateway` run
   - Then: Build/test succeed with Jest, confirming NestJS wiring

3. **Test ID:** 1.1-INT-003

   - Level: Integration (Expo start)
   - Given: Expo app within Nx `apps/mobile-app`
   - When: `nx run mobile-app:start` (Expo) executes
   - Then: Metro bundler boots, verifying compatibility

4. **Test ID:** 1.1-INT-004
   - Level: Integration (batch-jobs build)
   - Given: Worker target generated in Nx
   - When: `nx build batch-jobs` runs
   - Then: Worker artifact is produced, confirming target setup

### AC2 – "Shared libraries exist (`libs/domain`, `libs/ui`, `libs/data-access`, `libs/auth`, `libs/infra`) with path aliases, lint configuration, and placeholder exports."

**Coverage:** FULL

1. **Test ID:** 1.1-UNIT-001

   - Level: Unit
   - Given: A sample TypeScript spec importing from `libs/domain`
   - When: Type-checking compiles
   - Then: Path alias resolves; compile succeeds

2. **Test ID:** 1.1-INT-005
   - Level: Integration (Nx lint)
   - Given: Lint workspace configuration
   - When: `nx lint` executes on libs
   - Then: Shared lint rules apply without missing targets

### AC3 – "Root tooling configured with ESLint, Prettier, lint-staged, and npm scripts (`lint`, `test`, `build`, `format`)."

**Coverage:** FULL

1. **Test ID:** 1.1-INT-006

   - Level: Integration
   - Given: Root `package.json` npm scripts
   - When: `npm run lint && npm run test && npm run build` executed serially
   - Then: Scripts succeed, confirming tooling integration

2. **Test ID:** 1.1-UNIT-002
   - Level: Unit (static config)
   - Given: Automated check for `package.json` / lint-staged entries
   - When: Config parsing occurs
   - Then: Commands reference npm scripts, no pnpm leakage

### AC4 – "Local development environment includes `docker-compose` with NestJS API, PostgreSQL, Redis, and admin web static assets."

**Coverage:** FULL

1. **Test ID:** 1.1-E2E-001

   - Level: End-to-End
   - Given: `docker-compose.yml` mirroring architecture topology
   - When: `docker compose up --build` runs
   - Then: API healthcheck, Postgres, Redis services start; admin web assets served

2. **Test ID:** 1.1-INT-007
   - Level: Integration
   - Given: `.env.example` definitions
   - When: Scripting cross-checks env variables vs compose services
   - Then: All required variables present with sensible defaults

### AC5 – "GitHub Actions pipeline builds workspace, runs lint/tests, and builds Docker image per deployment plan."

**Coverage:** FULL

1. **Test ID:** 1.1-INT-008

   - Level: Integration
   - Given: GitHub Actions workflow definition
   - When: Pipeline dry-run (`act` or sandbox run) executes
   - Then: Lint/test/build steps succeed; Docker build completes

2. **Test ID:** 1.1-INT-009
   - Level: Integration (documentation)
   - Given: README badge configuration
   - When: Lint ensures workflow name matches badge
   - Then: Badge stays in sync with pipeline status

## Critical Gaps

None identified for this story. All ACs have at least one test mapped with appropriate level; risk-driven tests aligned with the design.

## Recommendations

- After scaffolding lands, ensure CI artifacts (logs) are archived to validate ongoing parity with this trace matrix.
- As soon as subsequent stories introduce business logic, extend trace matrix to include new ACs and ensure unit coverage grows beyond structural checks.

---

Trace matrix: `docs/qa/assessments/1.1-trace-20250926.md`
